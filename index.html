<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy Propose Day Sabaina üíê</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 50%, #ffe4e6 100%);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            overflow-x: hidden;
            color: #831843;
        }

        @keyframes gradientBG {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Floating Hearts */
        .hearts-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .floating-heart {
            position: absolute;
            font-size: 20px;
            opacity: 0.6;
            animation: float 12s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        /* Main Container */
        .main-container {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* Card */
        .card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 30px;
            padding: 30px 25px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 25px 50px rgba(219, 39, 119, 0.2);
            text-align: center;
        }

        h1 {
            font-size: clamp(1.8rem, 6vw, 2.5rem);
            color: #db2777;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: clamp(1.1rem, 4vw, 1.4rem);
            color: #be185d;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .insta-note {
            background: linear-gradient(135deg, #f9a8d4, #f472b6);
            color: white;
            padding: 12px 20px;
            border-radius: 15px;
            font-size: 0.9rem;
            margin-bottom: 20px;
            display: inline-block;
        }

        /* Photo */
        .photo-box {
            margin: 20px 0;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(219, 39, 119, 0.2);
            border: 4px solid white;
            background: #fce7f3;
        }

        .photo-box img {
            width: 100%;
            height: auto;
            max-height: 350px;
            object-fit: cover;
            display: block;
        }

        .photo-dots {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 15px;
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #f9a8d4;
            cursor: pointer;
        }

        .dot.active {
            background: #db2777;
            transform: scale(1.3);
        }

        .message {
            font-size: clamp(1rem, 3.5vw, 1.2rem);
            color: #9d174d;
            margin: 20px 0;
            line-height: 1.6;
        }

        /* Buttons */
        .btn {
            border: none;
            padding: 16px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 700;
            margin: 10px;
            transition: all 0.3s;
            touch-action: manipulation;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ec4899, #f43f5e);
            color: white;
            box-shadow: 0 10px 30px rgba(236, 72, 153, 0.4);
        }

        .btn-primary:active {
            transform: scale(0.95);
        }

        .btn-secondary {
            background: #f3f4f6;
            color: #9ca3af;
            border: 2px solid #e5e7eb;
        }

        /* Sections */
        .section {
            display: none;
            animation: fadeIn 0.5s;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Quiz */
        .quiz-box {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
        }

        .progress-bar {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .prog-dot {
            width: 30px;
            height: 6px;
            background: #fce7f3;
            border-radius: 3px;
        }

        .prog-dot.correct { background: #22c55e; }
        .prog-dot.wrong { background: #ef4444; }
        .prog-dot.current { background: #db2777; }

        .question {
            font-size: 1.2rem;
            color: #831843;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .option {
            background: #fdf2f8;
            border: 2px solid transparent;
            padding: 15px;
            margin: 8px 0;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1rem;
            color: #9d174d;
            transition: all 0.2s;
            display: block;
            width: 100%;
            text-align: left;
        }

        .option:active {
            background: #fce7f3;
            transform: scale(0.98);
        }

        .option.correct {
            background: #dcfce7;
            border-color: #22c55e;
            color: #166534;
        }

        .option.wrong {
            background: #fee2e2;
            border-color: #ef4444;
            color: #991b1b;
        }

        /* Canvas */
        #drawCanvas {
            width: 100%;
            height: 300px;
            border: 3px dashed #f9a8d4;
            border-radius: 15px;
            background: linear-gradient(135deg, #fff5f7, #fff0f5);
            touch-action: none;
        }

        /* Shake */
        .shake-box {
            background: linear-gradient(135deg, #fce7f3, #fbcfe8);
            border-radius: 25px;
            padding: 40px;
            margin: 20px 0;
            border: 3px solid #f9a8d4;
        }

        .shake-icon {
            font-size: 4rem;
            animation: shake 2s infinite;
        }

        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }

        .hidden-msg {
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.5s;
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 15px;
            font-size: 1.2rem;
            color: #db2777;
            font-weight: 600;
        }

        .hidden-msg.show {
            opacity: 1;
            transform: scale(1);
        }

        /* QR */
        #qrCode {
            background: white;
            padding: 20px;
            border-radius: 20px;
            display: inline-block;
            margin: 20px 0;
        }

        /* Final */
        .final-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
            position: relative;
            min-height: 100px;
        }

        #yesBtn {
            background: linear-gradient(135deg, #ec4899, #f43f5e);
            color: white;
            transform-origin: center;
        }

        #noBtn {
            position: relative;
        }

        #noBtn.moving {
            position: fixed !important;
            z-index: 1000;
        }

        /* Success */
        .success {
            display: none;
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #fce7f3, #ffe4e6);
            z-index: 1000;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            text-align: center;
        }

        .success.active {
            display: flex;
            animation: popIn 0.6s;
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .success-box {
            background: white;
            border-radius: 30px;
            padding: 40px;
            max-width: 450px;
            box-shadow: 0 30px 60px rgba(219, 39, 119, 0.2);
        }

        .big-emoji {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: bounce 1.5s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1) rotate(-5deg); }
            50% { transform: scale(1.2) rotate(5deg); }
        }

        .confetti {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
        }
    </style>
</head>
<body>
    <!-- Floating Hearts -->
    <div class="hearts-bg" id="heartsBg"></div>

    <div class="main-container">
        <div class="card">

            <!-- INTRO SECTION -->
            <div class="section active" id="introSection">
                <div class="insta-note">üíå We met on Instagram, but my heart knew instantly</div>
                <h1>Happy Propose Day üíê</h1>
                <p class="subtitle">Sabaina, I have something special to ask you üíñ</p>

                <div class="photo-box">
                    <img id="mainPhoto" src="https://i.postimg.cc/KvrrDfj3/IMG-20260208-132936-0683.jpg" alt="Sabaina">
                </div>
                <div class="photo-dots" id="photoDots"></div>

                <p class="message">
                    Even though we've only met through Instagram, you've become the most important person in my life. 
                    Every message from you makes my day brighter. Will you make me the happiest person?
                </p>

                <button class="btn btn-primary" onclick="startQuiz()">Start Our Journey üíï</button>
            </div>

            <!-- QUIZ SECTION -->
            <div class="section" id="quizSection">
                <h2 style="color: #db2777; margin-bottom: 10px;">Our Love Quiz üíï</h2>
                <p style="color: #be185d; margin-bottom: 20px;">Answer these to unlock my heart</p>

                <div class="progress-bar" id="progressBar"></div>

                <div class="quiz-box">
                    <div class="question" id="questionText"></div>
                    <div id="optionsBox"></div>
                </div>

                <div id="quizComplete" style="display: none;">
                    <div style="font-size: 3rem; margin: 20px 0;">üéâ</div>
                    <h3 style="color: #db2777;">Quiz Complete!</h3>
                    <p style="color: #9d174d; margin: 15px 0;">You got <span id="finalScore">0</span>/4 correct!</p>
                    <button class="btn btn-primary" onclick="goToDraw()">Continue üíï</button>
                </div>
            </div>

            <!-- DRAW SECTION -->
            <div class="section" id="drawSection">
                <h2 style="color: #db2777; margin-bottom: 10px;">Draw a Heart üíï</h2>
                <p style="color: #be185d; margin-bottom: 20px;">Draw a heart with your finger</p>

                <canvas id="drawCanvas"></canvas>
                <p style="color: #ec4899; margin-top: 10px; font-size: 0.9rem;">Draw a heart to unlock next step ‚ú®</p>

                <div style="margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="clearCanvas()">Clear</button>
                    <button class="btn btn-primary" id="drawNext" style="display: none;" onclick="goToShake()">Next üíï</button>
                </div>
            </div>

            <!-- SHAKE SECTION -->
            <div class="section" id="shakeSection">
                <h2 style="color: #db2777; margin-bottom: 10px;">Shake to Reveal üíï</h2>
                <p style="color: #be185d; margin-bottom: 20px;">Shake your phone!</p>

                <div class="shake-box" onclick="revealMsg()">
                    <div class="shake-icon">üì±</div>
                    <p style="color: #831843; font-weight: 600;">Shake or tap here!</p>
                </div>

                <div class="hidden-msg" id="secretMsg">
                    üíï I love you more with every passing day üíï<br>
                    You are my everything, Sabaina üåπ
                </div>

                <button class="btn btn-primary" id="shakeNext" style="display: none; margin-top: 20px;" onclick="goToQR()">Next üíï</button>
            </div>

            <!-- QR SECTION -->
            <div class="section" id="qrSection">
                <h2 style="color: #db2777; margin-bottom: 10px;">Scan My Love üíï</h2>
                <p style="color: #be185d; margin-bottom: 20px;">Scan this QR code</p>

                <div id="qrCode"></div>

                <button class="btn btn-primary" onclick="goToFinal()" style="margin-top: 20px;">The Big Question üíç</button>
            </div>

            <!-- FINAL SECTION -->
            <div class="section" id="finalSection">
                <div style="font-size: 5rem; margin-bottom: 20px;">üíç</div>
                <h1 style="font-size: 2rem;">Sabaina üíï</h1>
                <p class="message" style="font-size: 1.3rem; font-weight: 600;">
                    Will you be mine forever?<br>
                    Will you make me the luckiest person alive?
                </p>

                <div class="final-buttons">
                    <button class="btn btn-primary" id="yesBtn" onclick="sayYes()">Yes üíñ</button>
                    <button class="btn btn-secondary" id="noBtn" onclick="handleNo()">No üôà</button>
                </div>
            </div>

        </div>
    </div>

    <!-- SUCCESS SCREEN -->
    <div class="success" id="successScreen">
        <div class="success-box">
            <div class="big-emoji">üíïüéâüíç</div>
            <h1 style="color: #db2777; margin-bottom: 15px;">Yay! Sabaina Said Yes!</h1>
            <p style="color: #9d174d; font-size: 1.2rem; line-height: 1.7;">
                Thank you for saying yes üíï<br>
                You made my Propose Day special üåπ<br><br>
                From Instagram to Forever üíï
            </p>
            <button class="btn btn-primary" onclick="location.reload()" style="margin-top: 20px;">Watch Again üîÑ</button>
        </div>
    </div>

    <script>
        // DATA
        const photos = [
            'https://i.postimg.cc/KvrrDfj3/IMG-20260208-132936-0683.jpg',
            'https://i.postimg.cc/7LQNTL6L/IMG-20260208-132939-0461.jpg',
            'https://i.postimg.cc/TY8C9hcK/6cb4bfce14bcb09b93625f58414c3f97.jpg',
            'https://i.postimg.cc/vZr7XzZk/IMG-20251214-020050-487.webp',
            'https://i.postimg.cc/nzJh24M5/IMG-20260208-132951-0631.jpg',
            'https://i.postimg.cc/nhNzjbxb/IMG-20260208-132947-0303.jpg',
            'https://i.postimg.cc/YqqjTz8m/IMG-20260208-132942-0271.jpg'
        ];

        const questions = [
            { q: "When did I first propose to you?", options: ["Dec 14, 2025", "Feb 8, 2026", "Dec 25, 2025"], correct: 0 },
            { q: "When is your birthday?", options: ["Jun 21, 2008", "Jul 21, 2008", "Jun 12, 2008"], correct: 0 },
            { q: "What do I love most about you?", options: ["Your smile", "Everything", "Your laugh"], correct: 1 },
            { q: "What do I want forever?", options: ["Friendship", "Memories", "You"], correct: 2 }
        ];

        // STATE
        let currentPhoto = 0;
        let currentQ = 0;
        let score = 0;
        let yesSize = 1;
        let noCount = 0;

        // INIT
        window.onload = function() {
            createHearts();
            initPhotos();
            initCanvas();
        };

        // CREATE FLOATING HEARTS
        function createHearts() {
            const container = document.getElementById('heartsBg');
            const emojis = ['üíï', 'üíñ', 'üíó', 'üíì', 'üíù', 'üåπ', '‚ú®'];
            for (let i = 0; i < 15; i++) {
                const h = document.createElement('div');
                h.className = 'floating-heart';
                h.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                h.style.left = Math.random() * 100 + '%';
                h.style.animationDelay = Math.random() * 10 + 's';
                h.style.fontSize = (15 + Math.random() * 20) + 'px';
                container.appendChild(h);
            }
        }

        // PHOTO GALLERY
        function initPhotos() {
            const dots = document.getElementById('photoDots');
            photos.forEach((_, i) => {
                const d = document.createElement('div');
                d.className = 'dot' + (i === 0 ? ' active' : '');
                d.onclick = () => setPhoto(i);
                dots.appendChild(d);
            });
            setInterval(() => {
                currentPhoto = (currentPhoto + 1) % photos.length;
                setPhoto(currentPhoto);
            }, 3000);
        }

        function setPhoto(idx) {
            currentPhoto = idx;
            document.getElementById('mainPhoto').src = photos[idx];
            document.querySelectorAll('.dot').forEach((d, i) => {
                d.classList.toggle('active', i === idx);
            });
        }

        // NAVIGATION FUNCTIONS
        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // QUIZ
        function startQuiz() {
            showSection('quizSection');
            initQuiz();
        }

        function initQuiz() {
            const bar = document.getElementById('progressBar');
            bar.innerHTML = '';
            questions.forEach((_, i) => {
                const d = document.createElement('div');
                d.className = 'prog-dot' + (i === 0 ? ' current' : '');
                bar.appendChild(d);
            });
            loadQ();
        }

        function loadQ() {
            const q = questions[currentQ];
            document.getElementById('questionText').textContent = q.q;
            const box = document.getElementById('optionsBox');
            box.innerHTML = '';
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option';
                btn.textContent = opt;
                btn.onclick = () => checkAns(i);
                box.appendChild(btn);
            });
        }

        function checkAns(sel) {
            const q = questions[currentQ];
            const opts = document.querySelectorAll('.option');
            const dots = document.querySelectorAll('.prog-dot');

            opts.forEach((btn, i) => {
                btn.onclick = null;
                if (i === q.correct) btn.classL
